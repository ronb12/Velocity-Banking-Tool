<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Velocity Banking Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
    }
    input, select, button {
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      background-color: #007BFF;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    #results {
      margin-top: 20px;
      background: #e9ffe9;
      border: 2px solid #4CAF50;
      padding: 15px;
      border-radius: 6px;
    }
    footer {
      text-align: center;
      margin-top: 40px;
      font-size: 14px;
      color: #777;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>üìä Velocity Banking Calculator</h1>
  <form id="calcForm">
    <input type="text" id="userName" placeholder="Your Name (Optional)" />
    <input type="number" id="income" step="0.01" placeholder="Monthly Income ($)" required />
    <input type="number" id="extraIncome" step="0.01" placeholder="Yearly Extra Income ($)" required />
    <input type="number" id="expenses" step="0.01" placeholder="Monthly Expenses ($)" required />
    <input type="number" id="debtBalance" step="0.01" placeholder="Total Debt Balance ($)" required />
    <input type="number" id="interestRate" step="0.01" placeholder="Average Interest Rate (%)" required />
    <input type="number" id="minimumPayment" step="0.01" placeholder="Minimum Monthly Payment ($)" required />
    <input type="number" id="extraPayment" step="0.01" placeholder="Extra Payment ($)" />
    <input type="number" id="chunkPayment" step="0.01" placeholder="Chunk Payment Amount ($)" required />
    <input type="text" id="chunkMonths" placeholder="Chunk Months (comma-separated, e.g., 2,4,6)" />
    <select id="lineOfCredit" required>
      <option value="">Select Line of Credit</option>
      <option value="Credit Card">Credit Card</option>
      <option value="HELOC">HELOC</option>
      <option value="PLOC">PLOC</option>
      <option value="Personal Loan">Personal Loan</option>
    </select>
    <button type="submit">Calculate</button>
    <button type="button" id="saveInputs">üíæ Save</button>
    <button type="button" id="loadInputs">üìÇ Load</button>
    <button type="button" id="exportPdf">üñ®Ô∏è Export to PDF</button>
    <button type="button" id="clearInputs">üßπ Clear</button>
  </form>

  <div id="results"></div>

  <footer>Created by Ronell Bradley</footer>
</div>

<!-- PDF Export CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
  const form = document.getElementById("calcForm");
  const results = document.getElementById("results");

  form.addEventListener("submit", function (e) {
    e.preventDefault();

    const income = parseFloat(document.getElementById("income").value) || 0;
    const extraIncome = parseFloat(document.getElementById("extraIncome").value) || 0;
    const expenses = parseFloat(document.getElementById("expenses").value) || 0;
    const debtBalance = parseFloat(document.getElementById("debtBalance").value) || 0;
    const interestRate = parseFloat(document.getElementById("interestRate").value) || 0;
    const minPayment = parseFloat(document.getElementById("minimumPayment").value) || 0;
    const extraPayment = parseFloat(document.getElementById("extraPayment").value) || 0;
    const chunkPayment = parseFloat(document.getElementById("chunkPayment").value) || 0;
    const chunkMonths = document.getElementById("chunkMonths").value.split(",").map(x => parseInt(x.trim())).filter(n => !isNaN(n));
    const lineOfCredit = document.getElementById("lineOfCredit").value;
    const name = document.getElementById("userName").value;

    const monthlySurplus = income - expenses - minPayment;
    const totalAvailable = monthlySurplus + (extraIncome / 12);
    const totalChunked = chunkMonths.length * chunkPayment;
    const interestSaved = (totalChunked * (interestRate / 100)) * (chunkMonths.length > 0 ? (chunkMonths[chunkMonths.length - 1] / 12) : 0);

    results.innerHTML = `
      <h3>${name ? name + "'s " : ""}Velocity Strategy</h3>
      <p><strong>Monthly Surplus:</strong> $${monthlySurplus.toFixed(2)}</p>
      <p><strong>Total Available per Month:</strong> $${totalAvailable.toFixed(2)}</p>
      <p><strong>Total Chunked:</strong> $${totalChunked.toFixed(2)}</p>
      <p><strong>Estimated Interest Saved:</strong> $${interestSaved.toFixed(2)}</p>
      <p><strong>Strategy:</strong> Chunk $${chunkPayment.toFixed(2)} every ${chunkMonths.join(", ")} months using a ${lineOfCredit}</p>
    `;
  });

  document.getElementById("saveInputs").addEventListener("click", () => {
    const fields = ["userName", "income", "extraIncome", "expenses", "debtBalance", "interestRate", "minimumPayment", "extraPayment", "chunkPayment", "chunkMonths", "lineOfCredit"];
    const data = {};
    fields.forEach(id => data[id] = document.getElementById(id).value);
    localStorage.setItem("velocityCalc", JSON.stringify(data));
    alert("Saved!");
  });

  document.getElementById("loadInputs").addEventListener("click", () => {
    const data = JSON.parse(localStorage.getItem("velocityCalc"));
    if (!data) return alert("No saved data.");
    for (const key in data) {
      if (document.getElementById(key)) {
        document.getElementById(key).value = data[key];
      }
    }
  });

  document.getElementById("clearInputs").addEventListener("click", () => {
    form.reset();
    results.innerHTML = '';
  });

  document.getElementById("exportPdf").addEventListener("click", () => {
    html2pdf().from(document.querySelector(".container")).save("Velocity_Calculator.pdf");
  });
</script>
</body>
</html>
