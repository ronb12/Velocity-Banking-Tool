import{doc as e,onSnapshot as t}from"https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";const n=["localhost","127.0.0.1"].includes(window.location.hostname);if(!n){const n=()=>{try{const o=window.auth,i=window.db;if(!o||"function"!=typeof o.onAuthStateChanged)return void 0===n._retries&&(n._retries=0),void(n._retries<50&&(n._retries++,setTimeout(n,100)));n._retries=0,o.onAuthStateChanged(async n=>{if(!n)return window.location.href="login.html";if(window.location.pathname.includes("index.html")){const o=e(i,"networth",n.uid),d=e(i,"budgets",n.uid+"_"+(new Date).toISOString().slice(0,7)),a=e(i,"debts",n.uid);t(o,e=>{if(e.exists()&&document.getElementById("netWorthTile")){const t=e.data(),n=t.assets||[],o=t.liabilities||[],i=n.reduce((e,t)=>e+t.value,0),d=o.reduce((e,t)=>e+t.value,0);document.getElementById("netWorthTile").innerText="ðŸ§® Total Net Worth: $".concat((i-d).toFixed(2))}}),t(d,e=>{if(e.exists()&&document.getElementById("monthlyBudgetTile")){const t=e.data(),n=(t.incomes||[]).reduce((e,t)=>e+t.amount,0),o=(t.expenses||[]).reduce((e,t)=>e+t.budgeted,0);document.getElementById("monthlyBudgetTile").innerText="ðŸ’° Monthly Budget: $".concat(n.toFixed(2)),document.getElementById("remainingToBudgetTile").innerText="ðŸ“‰ Remaining to Budget: $".concat((n-o).toFixed(2))}}),t(a,e=>{const t=document.getElementById("debtSummaryTile");if(e.exists()&&t){const n=(e.data().debts||[]).reduce((e,t)=>e+(Number(t.balance)||0),0);t.innerText="ðŸ“Š Total Debt: $".concat(n.toFixed(2))}})}})}catch(o){setTimeout(n,500)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(n,200)}):setTimeout(n,200)}if(!n&&"undefined"!=typeof firebase&&firebase.auth&&window.db)try{const t=firebase.auth();t&&"function"==typeof t.onAuthStateChanged&&t.onAuthStateChanged(t=>{if(!t)return;const n=window.db;n&&e(n,"users",t.uid).onSnapshot(e=>{const t=e.data().creditUtilization||0,n=document.getElementById("creditUtilizationTile");if(!n)return;let o="";t<30?(o="ðŸŸ¢",n.style.borderLeftColor="#28a745"):t<50?(o="ðŸŸ¡",n.style.borderLeftColor="#ffc107"):(o="ðŸ”´",n.style.borderLeftColor="#dc3545"),n.innerText="ðŸ’³ Credit Utilization: ".concat(parseFloat(t).toFixed(2),"% ").concat(o)})})}catch(o){}
