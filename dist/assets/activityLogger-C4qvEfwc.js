var t=Object.defineProperty;import{_ as e}from"./preload-helper-BzSHXCLh.js";const a="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),o=class t{constructor(){this.db=null,this.auth=null,this.isInitialized=!1}async initialize(t,e){this.db=t,this.auth=e,this.isInitialized=!0}async logActivity(t,o,i="ðŸ“",c={}){if(!a&&this.isInitialized&&this.auth.currentUser)try{const{addDoc:a,collection:n,serverTimestamp:T}=await e(async()=>{const{addDoc:t,collection:e,serverTimestamp:a}=await import("https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js");return{addDoc:t,collection:e,serverTimestamp:a}},[]),s={icon:i,text:o,type:t,timestamp:T(),metadata:c,userId:this.auth.currentUser.uid};await a(n(this.db,"users",this.auth.currentUser.uid,"activity_logs"),s)}catch(n){}}async logDebtPayment(e,a,o){const i=t.ACTIVITY_TYPES.DEBT_PAYMENT.template(a,e);await this.logActivity("debt_payment",i,t.ACTIVITY_TYPES.DEBT_PAYMENT.icon,{debtName:e,amount:a,remainingBalance:o})}async logDebtAdded(e,a,o){const i=t.ACTIVITY_TYPES.DEBT_ADDED.template(e,a);await this.logActivity("debt_added",i,t.ACTIVITY_TYPES.DEBT_ADDED.icon,{debtName:e,amount:a,interestRate:o})}async logBudgetCreated(e,a){const o=t.ACTIVITY_TYPES.BUDGET_CREATED.template(e,a);await this.logActivity("budget_created",o,t.ACTIVITY_TYPES.BUDGET_CREATED.icon,{category:e,amount:a})}async logBudgetUpdated(e,a,o){const i=t.ACTIVITY_TYPES.BUDGET_UPDATED.template(e,o);await this.logActivity("budget_updated",i,t.ACTIVITY_TYPES.BUDGET_UPDATED.icon,{category:e,oldAmount:a,newAmount:o})}async logSavingsGoalCreated(e,a,o){const i=t.ACTIVITY_TYPES.SAVINGS_GOAL_CREATED.template(e,a);await this.logActivity("savings_goal_created",i,t.ACTIVITY_TYPES.SAVINGS_GOAL_CREATED.icon,{goalName:e,targetAmount:a,category:o})}async logSavingsContribution(e,a,o){const i=t.ACTIVITY_TYPES.SAVINGS_CONTRIBUTION.template(e,a);await this.logActivity("savings_contribution",i,t.ACTIVITY_TYPES.SAVINGS_CONTRIBUTION.icon,{goalName:e,amount:a,progress:o})}async logNetWorthUpdate(e,a,o){const i=t.ACTIVITY_TYPES.NET_WORTH_UPDATED.template(e,a);await this.logActivity("net_worth_updated",i,t.ACTIVITY_TYPES.NET_WORTH_UPDATED.icon,{type:e,amount:a,totalNetWorth:o})}async logVelocityCalculation(e,a,o){const i=t.ACTIVITY_TYPES.VELOCITY_CALCULATED.template(e,a);await this.logActivity("velocity_calculated",i,t.ACTIVITY_TYPES.VELOCITY_CALCULATED.icon,{debtAmount:e,payment:a,strategy:o})}async logTaxCalculation(e,a,o){const i=t.ACTIVITY_TYPES.TAX_CALCULATED.template(e,a);await this.logActivity("tax_calculated",i,t.ACTIVITY_TYPES.TAX_CALCULATED.icon,{year:e,totalTax:a,netIncome:o})}async logLogin(){const e=t.ACTIVITY_TYPES.LOGIN.template();await this.logActivity("login",e,t.ACTIVITY_TYPES.LOGIN.icon)}async logLogout(){const e=t.ACTIVITY_TYPES.LOGOUT.template();await this.logActivity("logout",e,t.ACTIVITY_TYPES.LOGOUT.icon)}async getRecentActivities(t=10){if(!this.isInitialized||!this.auth.currentUser)return[];try{const{collection:a,query:o,orderBy:i,limitToLast:c,getDocs:n}=await e(async()=>{const{collection:t,query:e,orderBy:a,limitToLast:o,getDocs:i}=await import("https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js");return{collection:t,query:e,orderBy:a,limitToLast:o,getDocs:i}},[]),T=o(a(this.db,"users",this.auth.currentUser.uid,"activity_logs"),i("timestamp","desc"),c(t));return(await n(T)).docs.map(t=>({id:t.id,...t.data()}))}catch(a){return[]}}};var i;((e,a,o)=>{a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o})(o,"symbol"!=typeof(i="ACTIVITY_TYPES")?i+"":i,{DEBT_PAYMENT:{icon:"ðŸ’³",template:(t,e)=>"Paid $".concat(t," towards ").concat(e)},DEBT_ADDED:{icon:"âž•",template:(t,e)=>"Added ".concat(t," debt of $").concat(e)},DEBT_UPDATED:{icon:"âœï¸",template:t=>"Updated ".concat(t," debt details")},DEBT_DELETED:{icon:"ðŸ—‘ï¸",template:t=>"Deleted ".concat(t," debt")},BUDGET_CREATED:{icon:"ðŸ“Š",template:(t,e)=>"Created budget for ".concat(t,": $").concat(e)},BUDGET_UPDATED:{icon:"âœï¸",template:(t,e)=>"Updated ".concat(t," budget to $").concat(e)},BUDGET_SPENT:{icon:"ðŸ’¸",template:(t,e)=>"Spent $".concat(e," on ").concat(t)},SAVINGS_GOAL_CREATED:{icon:"ðŸŽ¯",template:(t,e)=>"Created savings goal: ".concat(t," ($").concat(e,")")},SAVINGS_GOAL_UPDATED:{icon:"âœï¸",template:(t,e)=>"Updated savings goal: ".concat(t," ($").concat(e,")")},SAVINGS_GOAL_COMPLETED:{icon:"ðŸŽ‰",template:t=>"Completed savings goal: ".concat(t)},SAVINGS_CONTRIBUTION:{icon:"ðŸ’°",template:(t,e)=>"Added $".concat(e," to ").concat(t," savings goal")},NET_WORTH_UPDATED:{icon:"ðŸ“ˆ",template:(t,e)=>"Updated ".concat(t,": $").concat(e)},VELOCITY_CALCULATED:{icon:"ðŸ§®",template:(t,e)=>"Calculated velocity strategy for $".concat(t," debt with $").concat(e," payment")},TAX_CALCULATED:{icon:"ðŸ§¾",template:(t,e)=>"Calculated ".concat(t," taxes: $").concat(e)},LOGIN:{icon:"ðŸ”",template:()=>"Logged into account"},LOGOUT:{icon:"ðŸšª",template:()=>"Logged out of account"},PROFILE_UPDATED:{icon:"ðŸ‘¤",template:t=>"Updated profile ".concat(t)}});let c=o;window.activityLogger=new c,document.addEventListener("DOMContentLoaded",async function(){!function t(){window.db&&window.auth?window.activityLogger.initialize(window.db,window.auth):setTimeout(t,100)}()});
