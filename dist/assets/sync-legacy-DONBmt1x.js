System.register(["https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"],function(e,t){"use strict";var n,i;return{setters:[e=>{n=e.doc,i=e.onSnapshot}],execute:function(){const e=["localhost","127.0.0.1"].includes(window.location.hostname);if(!e){const e=()=>{try{const t=window.auth,o=window.db;if(!t||"function"!=typeof t.onAuthStateChanged)return void 0===e._retries&&(e._retries=0),void(e._retries<50&&(e._retries++,setTimeout(e,100)));e._retries=0,t.onAuthStateChanged(async e=>{if(!e)return window.location.href="login.html";if(window.location.pathname.includes("index.html")){const t=n(o,"networth",e.uid),d=n(o,"budgets",e.uid+"_"+(new Date).toISOString().slice(0,7)),r=n(o,"debts",e.uid);i(t,e=>{if(e.exists()&&document.getElementById("netWorthTile")){const t=e.data(),n=t.assets||[],i=t.liabilities||[],o=n.reduce((e,t)=>e+t.value,0),d=i.reduce((e,t)=>e+t.value,0);document.getElementById("netWorthTile").innerText=`ðŸ§® Total Net Worth: $${(o-d).toFixed(2)}`}}),i(d,e=>{if(e.exists()&&document.getElementById("monthlyBudgetTile")){const t=e.data(),n=(t.incomes||[]).reduce((e,t)=>e+t.amount,0),i=(t.expenses||[]).reduce((e,t)=>e+t.budgeted,0);document.getElementById("monthlyBudgetTile").innerText=`ðŸ’° Monthly Budget: $${n.toFixed(2)}`,document.getElementById("remainingToBudgetTile").innerText=`ðŸ“‰ Remaining to Budget: $${(n-i).toFixed(2)}`}}),i(r,e=>{const t=document.getElementById("debtSummaryTile");if(e.exists()&&t){const n=(e.data().debts||[]).reduce((e,t)=>e+(Number(t.balance)||0),0);t.innerText=`ðŸ“Š Total Debt: $${n.toFixed(2)}`}})}})}catch(t){setTimeout(e,500)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(e,200)}):setTimeout(e,200)}if(!e&&"undefined"!=typeof firebase&&firebase.auth&&window.db)try{const e=firebase.auth();e&&"function"==typeof e.onAuthStateChanged&&e.onAuthStateChanged(e=>{if(!e)return;const t=window.db;t&&n(t,"users",e.uid).onSnapshot(e=>{const t=e.data().creditUtilization||0,n=document.getElementById("creditUtilizationTile");if(!n)return;let i="";t<30?(i="ðŸŸ¢",n.style.borderLeftColor="#28a745"):t<50?(i="ðŸŸ¡",n.style.borderLeftColor="#ffc107"):(i="ðŸ”´",n.style.borderLeftColor="#dc3545"),n.innerText=`ðŸ’³ Credit Utilization: ${parseFloat(t).toFixed(2)}% ${i}`})})}catch(t){}}}});
