function t(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}import"./modulepreload-polyfill-YP0FEG5d.js";/* empty css              */import"./auth-D-ZYIE7C.js";import"./config-BVEHcmK7.js";import"./vendor-utils-D8RwcFva.js";import{collection as e,query as n,orderBy as o,limit as i,getDocs as a,doc as r,getDoc as c,setDoc as s}from"https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";import"https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";const d=["localhost","127.0.0.1"].includes(window.location.hostname),l=!d,u=.35,m=.3,y=.15,p=.1,g=.1;let h=[],f=null,E=null,v=720;function w(){try{const e=localStorage.getItem("creditScoreHistory");if(e)h=JSON.parse(e);else if(d){h=x();try{localStorage.setItem("creditScoreHistory",JSON.stringify(h))}catch(t){}}else h=[]}catch(e){h=d?x():[]}}function x(){const t=new Date,e=[];for(let n=6;n>=0;n--){const o=new Date(t);o.setMonth(o.getMonth()-n);const i=(6-n)/6,a=10*(Math.random()-.5),r=Math.round(680+40*i+a),c=Math.max(300,Math.min(850,r));e.push({score:c,timestamp:o.toISOString(),factors:{paymentHistory:0===n?100:Math.max(95,100-2*(6-n)),utilization:0===n?30:Math.min(45,30+3*(6-n)),historyLength:5+.1*(6-n),inquiries:0===n?2:Math.min(4,2+.3*(6-n)),creditMix:0===n?"good":n<3?"fair":"poor",derogatoryMarks:0}})}return e}async function I(){let t=null;if(l&&auth.currentUser)try{const e=r(db,"debts",auth.currentUser.uid),n=await c(e);if(n.exists()){const e=(n.data().debts||[]).filter(t=>"credit"===t.type),o=e.reduce((t,e)=>t+(parseFloat(e.limit)||0),0),i=e.reduce((t,e)=>t+(parseFloat(e.balance)||0),0);o>0&&(t=i/o*100)}}catch(e){}if(null===t)try{const e=JSON.parse(localStorage.getItem("local_test_debts")||"[]").filter(t=>"credit"===t.type),n=e.reduce((t,e)=>t+(parseFloat(e.limit)||0),0),o=e.reduce((t,e)=>t+(parseFloat(e.balance)||0),0);n>0&&(t=o/n*100)}catch(e){}if(null===t&&window.getLocalTestData)try{const e=(window.getLocalTestData("debts")||[]).filter(t=>"credit"===t.type),n=e.reduce((t,e)=>t+(parseFloat(e.limit)||0),0),o=e.reduce((t,e)=>t+(parseFloat(e.balance)||0),0);n>0&&(t=o/n*100)}catch(e){}null!==t?(document.getElementById("utilization").value=Math.round(t),document.getElementById("utilizationVal").textContent="".concat(Math.round(t),"%"),document.getElementById("utilizationSync").style.display="inline-flex",F(),"undefined"!=typeof ErrorHandler&&ErrorHandler.showSuccess?ErrorHandler.showSuccess("Credit utilization synced from Debt Tracker!"):window.ErrorHandler&&window.ErrorHandler.showSuccess&&window.ErrorHandler.showSuccess("Credit utilization synced from Debt Tracker!")):"undefined"!=typeof ErrorHandler&&ErrorHandler.showWarning?ErrorHandler.showWarning("No credit card data found in Debt Tracker."):window.ErrorHandler&&window.ErrorHandler.showWarning&&window.ErrorHandler.showWarning("No credit card data found in Debt Tracker.")}function B(){const t=parseInt(document.getElementById("paymentHistory").value),e=parseFloat(document.getElementById("utilization").value),n=parseFloat(document.getElementById("historyLength").value),o=parseInt(document.getElementById("inquiries").value),i=document.getElementById("creditMix").value;let a=850;return a-=t>=99?0:t>=97?20:t>=95?40:t>=90?80:t>=85?120:180,a-=e<=5?0:e<=10?20:e<=20?40:e<=30?60:e<=40?100:e<=50?140:e<=70?180:220,a-=n>=10?0:n>=7?20:n>=5?40:n>=3?60:n>=1?100:150,a-="excellent"===i?0:"good"===i?15:"fair"===i?30:50,a-=0===o?0:o<=1?10:o<=2?25:o<=4?50:o<=6?80:120,a-=40*parseInt(document.getElementById("derogatoryMarks").value),Math.max(300,Math.min(850,Math.round(a)))}function b(){return{paymentHistory:parseInt(document.getElementById("paymentHistory").value),utilization:parseFloat(document.getElementById("utilization").value),historyLength:parseFloat(document.getElementById("historyLength").value),inquiries:parseInt(document.getElementById("inquiries").value),creditMix:document.getElementById("creditMix").value,derogatoryMarks:parseInt(document.getElementById("derogatoryMarks").value)}}function S(t){return t<580?{label:"Poor",class:"poor",color:"#dc2626"}:t<670?{label:"Fair",class:"fair",color:"#f59e0b"}:t<740?{label:"Good",class:"good",color:"#10b981"}:t<800?{label:"Very Good",class:"very-good",color:"#3b82f6"}:{label:"Excellent",class:"excellent",color:"#8b5cf6"}}function F(){v=B();const t=S(v);document.getElementById("scoreNumber").textContent=v,document.getElementById("scoreRange").textContent=t.label,document.getElementById("scoreRange").className="score-range ".concat(t.class),function(t,e){const n=document.getElementById("scoreGauge").getContext("2d");f&&f.destroy();const o=(t-300)/550*100;f=new Chart(n,{type:"doughnut",data:{datasets:[{data:[o,100-o],backgroundColor:[e.color,"#e2e8f0"],borderWidth:0}]},options:{cutout:"75%",plugins:{legend:{display:!1},tooltip:{enabled:!1}},responsive:!0,maintainAspectRatio:!0}})}(v,t),function(){const t=b(),e=document.getElementById("factorBreakdown");e.innerHTML="";[{name:"Payment History",value:t.paymentHistory,max:100,unit:"%",weight:u},{name:"Credit Utilization",value:t.utilization,max:100,unit:"%",weight:m,reverse:!0},{name:"History Length",value:t.historyLength,max:20,unit:" years",weight:y},{name:"Credit Mix",value:L(t.creditMix),max:100,unit:"%",weight:p},{name:"Inquiries",value:Math.max(0,100-10*t.inquiries),max:100,unit:"%",weight:g}].forEach(t=>{const n=document.createElement("div");n.className="factor-item";let o=t.value,i=t.value/t.max*100;t.reverse&&(i=100-i),n.innerHTML='\n          <span class="factor-name">'.concat(t.name,'</span>\n          <div class="factor-bar">\n            <div class="factor-bar-fill" style="width: ').concat(i,'%"></div>\n          </div>\n          <span class="factor-value">').concat(o).concat(t.unit,"</span>\n        "),e.appendChild(n)})}(),function(){const t=b(),e=[],n=document.getElementById("recommendationsList");n.innerHTML="",t.paymentHistory<100&&e.push({priority:"High",text:"Improve payment history from ".concat(t.paymentHistory,"% to 100%"),impact:"Could improve score by ".concat(Math.round(.5*(100-t.paymentHistory))," points"),action:"Set up automatic payments for all bills"});if(t.utilization>30){const n=30,o=(t.utilization-n)/100;e.push({priority:"High",text:"Reduce credit utilization from ".concat(t.utilization.toFixed(1),"% to ").concat(n,"%"),impact:"Could improve score by ".concat(Math.round(1.5*(t.utilization-n))," points"),action:"Pay down approximately $".concat(Math.round(1e4*o)," in credit card debt")})}else t.utilization>10&&e.push({priority:"Medium",text:"Lower utilization from ".concat(t.utilization.toFixed(1),"% to below 10% for optimal score"),impact:"Could improve score by ".concat(Math.round(1*(t.utilization-10))," points"),action:"Pay down additional credit card balances"});t.historyLength<7&&e.push({priority:"Low",text:"Build credit history (currently ".concat(t.historyLength," years)"),impact:"Score will improve naturally as accounts age",action:"Keep old accounts open and use them occasionally"});t.inquiries>2&&e.push({priority:"Medium",text:"Limit new credit applications (".concat(t.inquiries," inquiries in last 12 months)"),impact:"Each inquiry can lower score by 5-10 points temporarily",action:"Avoid applying for new credit for 6-12 months"});"poor"!==t.creditMix&&"fair"!==t.creditMix||e.push({priority:"Low",text:"Diversify credit mix (currently ".concat(t.creditMix,")"),impact:"Could improve score by 10-20 points",action:"Consider adding a different type of credit (e.g., installment loan)"});if(0===e.length)return void(document.getElementById("recommendationsSection").style.display="none");document.getElementById("recommendationsSection").style.display="block",e.forEach(t=>{const e=document.createElement("div");e.className="recommendation-item",e.innerHTML='\n          <span class="recommendation-priority">'.concat(t.priority,'</span>\n          <div class="recommendation-text">\n            <strong>').concat(t.text,'</strong>\n            <div class="recommendation-impact">').concat(t.impact,'</div>\n            <div class="recommendation-impact" style="margin-top: 4px; font-weight: 600;">Action: ').concat(t.action,"</div>\n          </div>\n        "),n.appendChild(e)})}(),M()}function L(t){return{excellent:100,good:75,fair:50,poor:25}[t]||50}function M(){document.getElementById("yourScore").textContent=v;const t=v-714;document.getElementById("nationalDiff").textContent="".concat(t>=0?"+":"").concat(t," points"),document.getElementById("nationalDiff").className="diff ".concat(t>=0?"positive":"negative");const e=v-680;document.getElementById("ageDiff").textContent="".concat(e>=0?"+":"").concat(e," points"),document.getElementById("ageDiff").className="diff ".concat(e>=0?"positive":"negative");const n=v-750;document.getElementById("excellentDiff").textContent="".concat(n>=0?"+":"").concat(n," points"),document.getElementById("excellentDiff").className="diff ".concat(n>=0?"positive":"negative")}function H(){const t=document.getElementById("historyChart");if(!t||0===h.length)return;const e=t.getContext("2d");E&&E.destroy();const n=h.map((t,e)=>new Date(h[e].timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"})),o=h.map(t=>t.score);E=new Chart(e,{type:"line",data:{labels:n,datasets:[{label:"Credit Score",data:o,borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!1,min:300,max:850}}}})}function z(){const t=b(),e=parseFloat(document.getElementById("scenarioDebtPaydown").value)||0,n=parseFloat(document.getElementById("scenarioUtilization").value)||t.utilization,o=parseFloat(document.getElementById("scenarioCreditLimit").value)||0;let i=t.utilization;(e>0||o>0)&&(e>0&&(i=Math.max(0,t.utilization-e/1e4*10)),o>0&&(i=Math.max(0,i-o/1e4*5))),n!==t.utilization&&(i=n);const a=document.getElementById("utilization").value;document.getElementById("utilization").value=i;const r=B();document.getElementById("utilization").value=a;const c=r-v,s=document.getElementById("scenarioResult");s.style.display="block",s.innerHTML='\n        <h4 style="margin: 0 0 15px 0; color: #667eea;">Scenario Results</h4>\n        <div style="font-size: 1.2em; margin-bottom: 10px;">\n          <strong>Projected Score:</strong> <span style="color: '.concat(c>=0?"#10b981":"#ef4444",'; font-size: 1.5em; font-weight: 700;">').concat(r,'</span>\n        </div>\n        <div style="font-size: 1.1em; margin-bottom: 10px;">\n          <strong>Change:</strong> <span style="color: ').concat(c>=0?"#10b981":"#ef4444",';">').concat(c>=0?"+":"").concat(c,' points</span>\n        </div>\n        <div style="color: #64748b; font-size: 0.95em;">\n          ').concat(c>0?"This scenario would improve your score!":c<0?"This scenario would lower your score.":"No significant change expected.","\n        </div>\n      ")}let C=null;async function D(){try{const t=await async function(){return window.jspdf&&window.jspdf.jsPDF?window.jspdf.jsPDF:C||(C=new Promise((t,e)=>{const n=document.querySelector('script[data-jspdf="true"]');if(n)return n.addEventListener("load",()=>{window.jspdf&&window.jspdf.jsPDF?t(window.jspdf.jsPDF):e(new Error("jsPDF loaded but constructor missing"))}),void n.addEventListener("error",()=>e(new Error("Failed to load jsPDF script")));const o=document.createElement("script");o.src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js",o.async=!0,o.dataset.jspdf="true",o.addEventListener("load",()=>{window.jspdf&&window.jspdf.jsPDF?t(window.jspdf.jsPDF):e(new Error("jsPDF loaded but constructor missing"))}),o.onerror=()=>e(new Error("Failed to load jsPDF script")),document.head.appendChild(o)}),C)}();if(!t)throw new Error("Unable to load jsPDF library");const e=b(),n=S(v),o=new t({unit:"pt",format:"letter"}),i=o.internal.pageSize.getWidth(),a=o.internal.pageSize.getHeight(),r=72,c=90,s=c+30;let d=s;o.setFillColor(102,126,234),o.rect(0,0,i,c,"F"),o.setTextColor(255,255,255),o.setFontSize(24),o.setFont("helvetica","bold"),o.text("Credit Score Estimate Report",r,45),o.setFontSize(12),o.setFont("helvetica","normal"),o.text("Generated: ".concat((new Date).toLocaleDateString()),r,70),d=s,o.setTextColor(30,41,59),o.setFontSize(20),o.setFont("helvetica","bold"),o.text("Estimated Score: ".concat(v),r,d),d+=25,o.setFontSize(14),o.setFont("helvetica","normal"),o.setTextColor(102,126,234),o.text("Status: ".concat(n.label),r,d),d+=30,o.setTextColor(30,41,59),o.setFontSize(16),o.setFont("helvetica","bold"),o.text("Factor Breakdown",r,d),d+=25,o.setFontSize(11),o.setFont("helvetica","normal");["Payment History: ".concat(e.paymentHistory,"% (Weight: 35%)"),"Credit Utilization: ".concat(e.utilization.toFixed(1),"% (Weight: 30%)"),"Credit History Length: ".concat(e.historyLength," years (Weight: 15%)"),"Credit Inquiries: ".concat(e.inquiries," (Weight: 10%)"),"Credit Mix: ".concat(e.creditMix," (Weight: 10%)"),"Derogatory Marks: ".concat(e.derogatoryMarks)].forEach(t=>{d>a-100&&(o.addPage(),d=r),o.text(t,r+20,d),d+=20}),d+=15,d>a-120&&(o.addPage(),d=r),o.setFontSize(16),o.setFont("helvetica","bold"),o.text("Comparisons",r,d),d+=25,o.setFontSize(11),o.setFont("helvetica","normal");const l=v-714,u=v-680,m=v-750;o.text("National Average: 714 (".concat(l>=0?"+":"").concat(l," points)"),r+20,d),d+=20,o.text("Age Group Average (25-34): 680 (".concat(u>=0?"+":"").concat(u," points)"),r+20,d),d+=20,o.text("Excellent Range: 750+ (".concat(m>=0?"+":"").concat(m," points)"),r+20,d),d+=25,d>a-80&&(o.addPage(),d=r),o.setFontSize(10),o.setTextColor(100,116,139);const y="Note: This is an estimate only. Always check your official credit report for your actual score.",p=o.splitTextToSize(y,i-2*r);o.text(p,r,d),d+=15*p.length+10,o.text("Generated by Bradley's Financial Tools",r,d),o.save("credit-score-report-".concat((new Date).toISOString().split("T")[0],".pdf")),"undefined"!=typeof ErrorHandler&&ErrorHandler.showSuccess?ErrorHandler.showSuccess("PDF report exported successfully!"):window.ErrorHandler&&window.ErrorHandler.showSuccess&&window.ErrorHandler.showSuccess("PDF report exported successfully!")}catch(t){"undefined"!=typeof ErrorHandler&&ErrorHandler.showError?ErrorHandler.showError("Failed to export PDF. Please try again."):window.ErrorHandler&&window.ErrorHandler.showError?window.ErrorHandler.showError("Failed to export PDF. Please try again."):alert("Failed to export PDF. Please try again.")}}function j(){const t=document.getElementById("paymentHistory"),e=document.getElementById("utilization");t&&t.addEventListener("input",function(){const t=document.getElementById("paymentHistoryVal");t&&(t.textContent="".concat(this.value,"%")),F()}),e&&e.addEventListener("input",function(){const t=document.getElementById("utilizationVal");t&&(t.textContent="".concat(this.value,"%")),F()}),["historyLength","inquiries","creditMix","derogatoryMarks"].forEach(t=>{const e=document.getElementById(t);e&&(e.addEventListener("input",F),e.addEventListener("change",F))});const n=document.getElementById("syncDataBtn");n&&n.addEventListener("click",I);const o=document.getElementById("helpBtn");o&&o.addEventListener("click",()=>{const t=document.getElementById("helpModal");t&&t.classList.add("active")});const i=document.getElementById("scenarioBtn");i&&i.addEventListener("click",()=>{const t=document.getElementById("scenarioModal");t&&(t.classList.add("active"),document.getElementById("scenarioDebtPaydown").value="0",document.getElementById("scenarioUtilization").value="30",document.getElementById("scenarioCreditLimit").value="0",document.getElementById("scenarioResult").style.display="none")});const a=document.getElementById("historyBtn");a&&a.addEventListener("click",()=>{const t=document.getElementById("historyModal");t&&(t.classList.add("active"),d&&0===h.length&&w(),setTimeout(()=>{h.length>0?H():d&&(h=x(),H())},100))});const c=document.getElementById("compareBtn");c&&c.addEventListener("click",()=>{const t=document.getElementById("comparisonModal");t&&(t.classList.add("active"),M())});const u=document.getElementById("creditFactorsBtn");u&&u.addEventListener("click",()=>{const t=document.getElementById("creditFactorsModal");t&&t.classList.add("active")});const m=document.getElementById("exportBtn");m&&m.addEventListener("click",D);const y=document.getElementById("saveBtn");y&&y.addEventListener("click",()=>{!function(){const t={score:v,timestamp:(new Date).toISOString(),factors:b()};if(h.push(t),h.length>12&&(h=h.slice(-12)),l&&auth.currentUser)try{s(r(db,"creditScores","".concat(auth.currentUser.uid,"_").concat(Date.now())),t)}catch(e){}try{localStorage.setItem("creditScoreHistory",JSON.stringify(h))}catch(e){}}(),"undefined"!=typeof ErrorHandler&&ErrorHandler.showSuccess?ErrorHandler.showSuccess("Score saved successfully!"):window.ErrorHandler&&window.ErrorHandler.showSuccess?window.ErrorHandler.showSuccess("Score saved successfully!"):alert("Score saved successfully!")});const p=document.getElementById("runScenarioBtn");p&&p.addEventListener("click",z)}function k(){j(),function(){document.querySelectorAll(".close-modal").forEach(t=>{t.addEventListener("click",function(){const t=this.getAttribute("data-close"),e=document.getElementById(t);e&&e.classList.remove("active")})});const t=document.getElementById("helpModal");t&&t.addEventListener("click",function(t){t.target===this&&this.classList.remove("active")});const e=document.getElementById("scenarioModal");e&&e.addEventListener("click",function(t){t.target===this&&this.classList.remove("active")});const n=document.getElementById("historyModal");n&&n.addEventListener("click",function(t){t.target===this&&this.classList.remove("active")});const o=document.getElementById("comparisonModal");o&&o.addEventListener("click",function(t){t.target===this&&this.classList.remove("active")});const i=document.getElementById("creditFactorsModal");i&&i.addEventListener("click",function(t){t.target===this&&this.classList.remove("active")})}(),async function(){if(l&&auth.currentUser)try{const t=e(db,"creditScores"),r=n(t,o("timestamp","desc"),i(12)),c=await a(r);h=c.docs.map(t=>({...t.data(),id:t.id})).reverse()}catch(t){w()}else w();return Promise.resolve()}().then(()=>{F(),d&&setTimeout(I,1e3)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",k):k();export{t as __vite_legacy_guard};
